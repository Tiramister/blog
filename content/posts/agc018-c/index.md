---
title: "AtCoder Grand Contest 018 C - Coins"
date: 2018-09-12
tags: [atcoder]
links:
  - label: "Problem"
    url: https://atcoder.jp/contests/agc018/tasks/agc018_c
  - label: "My Submission"
    url: https://atcoder.jp/contests/agc018/submissions/3181196
---

## 概要

$X + Y + Z$ 人の人がいる。人 $i$ は金、銀、銅のコインをそれぞれ $A\_i, B\_i, C\_i$ 枚ずつ持っている。

あなたは彼らのうち $X$ 人から金のコイン、 $Y$ 人から銀のコイン、 $Z$ 人から銅のコインを全て貰うことができる。
ただし、同じ人から 2 種類以上のコインを貰うことはできない。

このとき、あなたが貰えるコインの枚数の最大値を求めよ。

### 制約

- $1 \\leq X, Y, Z$
- $X + Y + Z \\leq 10\^5$
- $1 \\leq A\_i, B\_i, C\_i \\leq 10\^9$

## 解説

銅は無視して金と銀についてだけ考えることにする。
あと冗長なので金のコインを貰う人のことを「金の人」と呼ぶことにする。銀と銅も同様。

まず、人々を(金コインの枚数)-(銀コインの枚数)で昇順にソートして左から並べる。
この中には最適解における金の人 $X$ 人と銀の人 $Y$ 人がいるわけだが、実は **最適解における金の人はすべての銀の人より右側にいる** ことが分かる。

{{<collapse summary="証明">}}
金の人の右に銀の人がいるとする。
このとき、この 2 人から貰うコインの種類を交換することで、総コイン数はより多くなる。
元金の人から銀コインを貰うことによる損を、元銀の人から金コインを貰うことによる得が上回るためである。
{{</collapse>}}

先のソートした状態にて、左から $K$ 人と右から $X + Y + Z - K$ 人の 2 グループに分ける。このとき、

- 左グループは $Y$ 人を銀の人、 $K - Y$ 人を銅の人
- 右グループは $X$ 人を金の人、 $Y + Z - K$ 人を銅の人

に分けるような最適解が存在する。各グループにおける割り振りはどうすればいいかというと、先と同じように(金 or 銀の枚数)-(銅の枚数)でソートしてやればいい。この辺はグループの人数を増やしながら priority_queue を使えばできる。

この割り振りにおけるコインの合計枚数を各 $K$ について求めれば、その最大値が答えとなる。

## 実装例

{{<code file="0.cpp" language="cpp">}}
