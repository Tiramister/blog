---
title: "Educational Codeforces Round 77 E - Tournament"
date: 2020-01-19
tags: [codeforces]
links:
  - label: Problem link
    url: https://codeforces.com/contest/1260/problem/E
  - label: My Submission
    url: https://codeforces.com/contest/1260/submission/69078003
---

## 問題

Alice は $2\^k$ 人によるトーナメントに参加している．
$i$ 人目の強さは $i$ で，2 人が戦ったとき強さの大きい方が必ず勝つ．
なお，Alice は $m$ 人目である．

今からあなたは，トーナメント表を好きなように作って Alice を優勝させたい．

さらにあなたは好きなだけ選手を買収することができる． $i$ 人目を買収するのにかかるコストは $a\_i$ で，買収した選手は Alice と戦ったときに必ず負ける．

Alice を優勝させるのに必要な最小コストを求めよ．

### 制約

- $1 \\leq k \\leq 18$
- $1 \\leq a\_i \\leq 10\^9$

## 考察

$m = 2\^k$ なら $0$ ．そうでない場合を考える．

決勝から順に誰を Alice に当てるかを決めることにする．

まず $2\^k$ 人目(Bob と呼ぶことにする)は必ず買収しないといけない．Bob には極力多くの人を倒して貰ったほうが，準決勝で選べる幅が増える．よって Bob とは決勝で戦うことにし，準決勝で誰が選べるかを考える．

するとトーナメントは「Alice の属するグループ」と「Bob の属するグループ」に分かれる．準決勝の相手は Alice グループで最強でないといけない．ここで Bob グループの人数は $2\^\{k - 1\}$ 人なので， $2\^\{k - 1\} - 1$ 人目以降なら誰でも選べることが分かる(それより強いやつを Bob グループに押し付ければいい)．一方それより弱い人は，Alice グループにより強い人が必ずいることになるので選ぶことはできない．

したがって $2\^\{k - 1\} - 1$ 人目から $2\^k - 1$ 人目の中で一番安い人を選ぶのが最善．もしその中に Alice がいれば，自身が最強なので買収なしで優勝できる．

これは「選べる候補が $2\^\{k - 1\}$ 人増えた」と言い換えることができる．再帰的に考えると，最初候補が Bob だけの状態から，「最後から $i$ 番目の対戦相手を候補から貪欲に決める $\\to$ 上から $2\^\{k - i\}$ 人を候補に追加する」を $i = 1$ から繰り返していく貪欲によって最小コストが求まる．

## 実装例

{{<code file="0.cpp" language="cpp">}}
