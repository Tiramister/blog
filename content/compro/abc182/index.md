---
title: AtCoder Beginner Contest 182
date: 2020-11-08
tags: [atcoder]
links:
  - label: Contest link
    url: https://atcoder.jp/contests/abc182
---

## 結果

|      |  A   |  B   |  C   |  D   |   E   |   F   |
| :--: | :--: | :--: | :--: | :--: | :---: | :---: |
| time | 0:37 | 2:58 | 5:23 | 8:29 | 21:06 | 41:27 |
|  Δ   | 0:37 | 1:31 | 2:25 | 3:06 | 12:37 | 20:21 |

| score |   time   | rank |                  perf                   |
| :---: | :------: | :--: | :-------------------------------------: |
| 2100  | 46:27(1) | 22nd | {{<color orange>}}2400(max){{</color>}} |

## 問題

### C - To 3

「 $N$ が $3$ の倍数」と「 $N$ の桁和が $3$ の倍数」が同値なので、各数字の出現回数を $\bmod 3$ で集計すれば $O(1)$ で多分答えが出る。

が、色々考えるのが面倒なので無思考で書ける bit 全探索で実装した。

### D - Wandering

最初「 $A\_1$ 進み、 $\cdots$ 、 $A\_i$ 進む」の直後 $N$ 箇所しか見なくていいと誤読して実装していた。
といっても変更はそれほど大変ではなく、 $\sum\_\{i = 1\}\^\{i\} A\_i$ のそれまでの最大値を追加で持つだけでいい。

### E - Akari

前に 2 問くらい似たの見たな ([ABC129-D](https://atcoder.jp/contests/abc129/tasks/abc129_d) と [ABC176-E](https://atcoder.jp/contests/abc176/tasks/abc176_e)) と思ったが、コンテスト後に読み返すとちゃんと違う問題だった。

愚直に壁に突き当たるまで見ていると $O(N(H+W))$ で TLE だが、「電球にぶつかったときも探索を打ち切る」とすると各マスを見る回数が高々 $4$ 回になって間に合う、という話。
典型的な計算量改善手法の 1 つ。

実装は DFS で行ったのだが、なぜかバグり散らかした。バグっていたときの実装が以下の通り。

{{<code file="0.cpp" language="cpp">}}

「電球の位置から探索すると(即探索を打ち切られて)困るから、電球から 1 つ離れた位置から探索しよう」と思っていたのだが、DFS 内部と呼び出し側両方でその処理をした結果、2 つ離れた位置から探索してしまっていた。なにこれ？

### F - Valid payments

$N$ 進数表記と同じ発想で、任意の整数は $\sum\_\{i=1\}\^\{N\} c\_i A\_i \quad (0 \leq c\_i \lt \frac\{A\_\{i+1\}\}\{A\_i\})$ という形で一意に表せる。以降この $c\_i$ を「 $i$ 桁目」と呼ぶことにする。

$y$ を 1 桁目から決めていくことを考える。ここで $y$ と $y - X$ の少なくとも一方の 1 桁目が $0$ なので、 $y$ の 1 桁目として考えられるのは $0$ か $X$ の 1 桁目となる。特に前者の場合は繰り上がりが発生する、つまり次の桁で $1$ 多くしないといけない。
この繰り上がりは高々 $1$ なので、繰り上がりを状態として DP をすればよい。

ただこの「繰り上がり」が厄介で、本番は脳がバグった。
特に「元々 $X$ の $i$ 桁目が $\frac\{A\_\{i + 1\}\}\{A\_i\}-1$ で、繰り上がりが連鎖的に発生する」というケースを見落としていた。ちゃんとこのケースがサンプルにあるのが優しい。

## 反省

- EF がどちらも酷かった。
  - なんか今日は精神的に不安定だったのが原因な気もする。
- F では [前の ARC-D](https://atcoder.jp/contests/arc107/tasks/arc107_d) での DP の立て方が少し活きた。
